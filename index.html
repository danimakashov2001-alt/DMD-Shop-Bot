<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ö–∞—Ç–∞–ª–æ–≥</title>

<style>
:root { --accent:#c49a6c }
*{margin:0;padding:0;box-sizing:border-box}

html,body{
  width:100%;
  height:100%;
  overflow:hidden;
  font-family:-apple-system,BlinkMacSystemFont,Arial;
  background:#0b0b0b;
  color:#fff;
}

body{
  overscroll-behavior:none;
}

/* HEADER */
header{
  height:46px;
  display:flex;
  align-items:center;
  padding:0 14px;
  background:rgba(15,15,15,.95);
}

/* CATALOG */
.catalog{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
  padding:14px;
  overflow-y:auto;
  height:calc(100vh - 46px);
}
.card{
  background:#fff;
  color:#000;
  border-radius:16px;
  overflow:hidden;
}
.card img{
  width:100%;
  height:210px;
  object-fit:cover;
}
.card-body{padding:10px;font-size:13px}

/* GALLERY */
#gallery{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  z-index:100;
}

.viewer-wrapper{
  position:relative;
  width:100%;
  height:100%;
  overflow:hidden;
  touch-action:none;
}

.viewer{
  position:absolute;
  inset:0;
}

.viewer img{
  position:absolute;
  left:50%;
  top:50%;
  width:100%;
  height:100%;
  object-fit:contain;
  transform:translate3d(-50%,-50%,0) scale(1);
  will-change:transform;
  user-select:none;
  pointer-events:none;
}

/* UI */
.gallery-header{
  position:absolute;
  top:0;left:0;right:0;
  height:60px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px;
  background:linear-gradient(180deg,rgba(0,0,0,.7),transparent);
  z-index:10;
}
.close{font-size:26px;cursor:pointer}
.counter{font-size:13px}

.arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  font-size:40px;
  padding:10px;
  cursor:pointer;
  z-index:10;
}
.arrow.left{left:10px}
.arrow.right{right:10px}
</style>
</head>

<body>

<header><h3>üõç –ö–∞—Ç–∞–ª–æ–≥</h3></header>
<div class="catalog" id="catalog"></div>

<div id="gallery">
  <div class="gallery-header">
    <div class="close" onclick="closeGallery()">‚úï</div>
    <div class="counter"><span id="current">1</span>/<span id="total">1</span></div>
  </div>
  <div class="viewer-wrapper" id="viewerWrapper">
    <div class="arrow left" onclick="prev()">‚Äπ</div>
    <div class="arrow right" onclick="next()">‚Ä∫</div>
    <div class="viewer" id="viewer"></div>
  </div>
</div>

<script>
/* TELEGRAM FIX */
if(window.Telegram?.WebApp){
  Telegram.WebApp.disableVerticalSwipes();
}

/* DATA */
const products=[
{
name:"–ó–∏–ø —Ö—É–¥–∏ Zara Type crop fit (—Å–µ—Ä—ã–π)",
price:4300,
status:"–í –Ω–∞–ª–∏—á–∏–∏",
description:"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏: 185/70, —Ä–∞–∑–º–µ—Ä L.",
subcategory:"zip_hoodies",
photos:[
"https://iili.io/fVQvE5F.jpg",
"https://iili.io/fVQU5WG.jpg",
"https://iili.io/fVQUMbe.webp",
"https://iili.io/fVQUv5P.webp"
]
},
{
name:"–ó–∏–ø —Ö—É–¥–∏ Zara Type crop fit (—á—ë—Ä–Ω—ã–π)",
price:4300,
status:"–í –Ω–∞–ª–∏—á–∏–∏",
description:"–ú–∏–Ω–∏–º–∞–ª–∏–∑–º. –ü–ª–æ—Ç–Ω—ã–π —Ö–ª–æ–ø–æ–∫.",
subcategory:"zip_hoodies",
photos:[
"https://iili.io/fVQ6E4j.webp",
"https://iili.io/fVQ6ba4.webp",
"https://iili.io/fVQPF6b.webp",
"https://iili.io/fVQPuMg.webp",
"https://iili.io/fVQP0NI.webp"
]
},
{
name:"–ó–∏–ø —Ö—É–¥–∏ No Faith Studio boxy crop fit",
price:4100,
status:"–í –Ω–∞–ª–∏—á–∏–∏",
description:"Y2K / Opium —Å—Ç–∏–ª—å.",
subcategory:"zip_hoodies",
photos:[
"https://iili.io/fXB5Ctj.jpg",
"https://iili.io/fXqKi8B.webp",
"https://iili.io/fXqfRte.webp"
]
},
{
name:"–õ–æ–Ω–≥—Å–ª–∏–≤ Derschutze crop fit",
price:3890,
status:"–í –Ω–∞–ª–∏—á–∏–∏",
description:"–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –≤—ã—à–∏–≤–∫–∞.",
subcategory:"longsleeves",
photos:[
"https://iili.io/fVQgdrl.webp",
"https://iili.io/fVQgbaV.webp",
"https://iili.io/fVQrMMb.webp",
"https://iili.io/fVQrkDF.webp",
"https://iili.io/fVQ4JJ2.webp",
"https://iili.io/fVQ4I5B.webp"
]
}
];

/* CATALOG */
const catalog=document.getElementById("catalog");
products.forEach(p=>{
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`<img src="${p.photos[0]}"><div class="card-body">${p.name}</div>`;
  c.onclick=()=>openGallery(p);
  catalog.appendChild(c);
});

/* GALLERY CORE */
const gallery=document.getElementById("gallery");
const viewer=document.getElementById("viewer");
const current=document.getElementById("current");
const total=document.getElementById("total");

let photos=[],index=0,img;
let scale=1,tx=0,ty=0;
let startX=0,startY=0,startTx=0,startTy=0;
let startDist=0,startScale=1;
let isPinch=false;
let lastTap=0;

/* HELPERS */
function apply(){
  img.style.transform=`translate3d(${tx}px,${ty}px,0) scale(${scale}) translate3d(-50%,-50%,0)`;
}
function clamp(){
  const r=viewer.getBoundingClientRect();
  const mw=Math.max(0,(r.width*scale-r.width)/2);
  const mh=Math.max(0,(r.height*scale-r.height)/2);
  tx=Math.min(mw,Math.max(-mw,tx));
  ty=Math.min(mh,Math.max(-mh,ty));
}

/* OPEN */
function openGallery(p){
  photos=p.photos;
  index=0;
  gallery.style.display="block";
  load();
}
function closeGallery(){
  gallery.style.display="none";
}

/* LOAD */
function load(){
  viewer.innerHTML="";
  img=document.createElement("img");
  img.src=photos[index];
  viewer.appendChild(img);
  scale=1;tx=0;ty=0;
  apply();
  current.textContent=index+1;
  total.textContent=photos.length;
}

/* NAV */
function prev(){ if(index>0){index--;load();}}
function next(){ if(index<photos.length-1){index++;load();}}

/* TOUCH */
viewer.addEventListener("touchstart",e=>{
  if(e.touches.length===2){
    isPinch=true;
    startDist=Math.hypot(
      e.touches[0].clientX-e.touches[1].clientX,
      e.touches[0].clientY-e.touches[1].clientY
    );
    startScale=scale;
  }else{
    const t=e.touches[0];
    startX=t.clientX; startY=t.clientY;
    startTx=tx; startTy=ty;
    const now=Date.now();
    if(now-lastTap<300) toggleZoom(t.clientX,t.clientY);
    lastTap=now;
  }
},{passive:false});

viewer.addEventListener("touchmove",e=>{
  if(isPinch && e.touches.length===2){
    e.preventDefault();
    const d=Math.hypot(
      e.touches[0].clientX-e.touches[1].clientX,
      e.touches[0].clientY-e.touches[1].clientY
    );
    scale=Math.min(4,Math.max(1,startScale*d/startDist));
    clamp(); apply();
  }else if(scale>1){
    e.preventDefault();
    const t=e.touches[0];
    tx=startTx+(t.clientX-startX);
    ty=startTy+(t.clientY-startY);
    clamp(); apply();
  }
},{passive:false});

viewer.addEventListener("touchend",e=>{
  isPinch=false;
  if(scale===1 && e.changedTouches.length){
    const dx=e.changedTouches[0].clientX-startX;
    if(Math.abs(dx)>50) dx>0?prev():next();
  }
});

/* DESKTOP */
viewer.addEventListener("wheel",e=>{
  e.preventDefault();
  scale+=e.deltaY<0?0.2:-0.2;
  scale=Math.min(4,Math.max(1,scale));
  clamp(); apply();
},{passive:false});

viewer.addEventListener("dblclick",e=>{
  toggleZoom(e.clientX,e.clientY);
});

/* ZOOM */
function toggleZoom(x,y){
  const r=viewer.getBoundingClientRect();
  const ox=x-r.left-r.width/2;
  const oy=y-r.top-r.height/2;
  if(scale===1){
    scale=2;
    tx=-ox; ty=-oy;
  }else{
    scale=1; tx=0; ty=0;
  }
  apply();
}

/* iOS SAFARI FIX */
document.addEventListener("gesturestart",e=>e.preventDefault(),{passive:false});
</script>

</body>
</html>
